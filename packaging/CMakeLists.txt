# ---- Create Installer ----
include(InstallRequiredSystemLibraries)

set(CPACK_PACKAGE_NAME ${PROJECT_NAME})
set(CPACK_PACKAGE_VENDOR ${AUTHOR_NAME})
set(CPACK_PACKAGE_CONTACT ${AUTHOR_GMAIL})
set(CPACK_RESOURCE_FILE_LICENSE ${PROJECT_LICENSE})
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY ${PROJECT_SUMMARY})
set(CPACK_PACKAGE_VERSION "${PROJECT_VERSION}")
set(CPACK_PACKAGE_INSTALL_DIRECTORY ${PROJECT_NAME})
set(CPACK_PACKAGE_EXECUTABLES "${PROJECT_NAME};${PROJECT_NAME}")

if(WIN32)
    set(CPACK_GENERATOR "NSIS")
    set(CPACK_NSIS_DISPLAY_NAME ${PROJECT_NAME})
    set(CPACK_NSIS_PACKAGE_NAME ${PROIJECT_NAME})
    set(CPACK_NSIS_MODIFY_PATH "ON")
    set(CPACK_NSIS_WELCOME_TITLE ${PROJECT_NAME})
    set(CPACK_NSIS_FINISH_TITLE "Everything is done")
    set(CPACK_NSIS_BRANDING_TEXT ${AUTHOR_NAME})
    set(CPACK_NSIS_URL_INFO_ABOUT ${PROJECT_GITHUB_URL})
    set(CPACK_NSIS_CONTACT ${AUTHOR_GMAIL})
    set(CPACK_NSIS_MENU_LINKS ${PROJECT_GITHUB_URL} "Github")
    set(CPACK_NSIS_MUI_ICON "${DATA_ICO_ICON_PATH}")
    set(CPACK_NSIS_MUI_UNIICON "${DATA_ICO_ICON_PATH}")
    set(CPACK_NSIS_INSTALLED_ICON_NAME "${DATA_ICO_ICON_PATH}")
    set(CPACK_NSIS_CREATE_ICONS_EXTRA
        "CreateShortCut '$SMPROGRAMS\\\\$STARTMENU_FOLDER\\\\${PROJECT_NAME}.lnk' '$INSTDIR\\\\bin\\\\${PROJECT_NAME}.exe' '${DATA_ICO_ICON_PATH}'"
    )
endif(WIN32)

if(UNIX)
    set(CPACK_GENERATOR "DEB")
    set(CPACK_DEBIAN_PACKAGE_MAINTAINER "${AUTHOR_NAME} <${CPACK_PACKAGE_CONTACT}>")
    set(CPACK_DEBIAN_FILE_NAME DEB-DEFAULT)
endif(UNIX)

include(CPack)
